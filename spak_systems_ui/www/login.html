{% extends "templates/web.html" %}

{% macro email_login_body() -%}
{% if not disable_user_pass_login or (ldap_settings and ldap_settings.enabled) %}
<div class="page-card-body">
	<div class="form-group">
		<label class="form-label sr-only" for="login_email">{{ login_label or _("Email")}}</label>
		<div class="email-field">
			<svg class="field-icon email-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"
				xmlns="http://www.w3.org/2000/svg">
				<path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
			</svg>
			<input type="text" id="login_email" class="form-control"
				placeholder="{{ _('Username or Email') }}"
				required autofocus autocomplete="username">
		</div>
	</div>

	<div class="form-group">
		<label class="form-label sr-only" for="login_password">{{ _("Password") }}</label>
		<div class="password-field">
			<svg class="field-icon password-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"
				xmlns="http://www.w3.org/2000/svg">
				<path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
			</svg>
			<input type="password" id="login_password" class="form-control" placeholder="{{ _('Password') }}"
				autocomplete="current-password" required>
		</div>
	</div>

	<div class="remember-forgot-row">
		<label class="remember-checkbox">
			<input type="checkbox" id="remember_me" name="remember_me">
			<span>{{ _("Remember") }}</span>
		</label>
		<p class="forgot-password-message">
			<a href="#forgot">{{ _("Forgot password?") }}</a>
		</p>
	</div>
</div>
{% endif %}
<div class="page-card-actions">
	{% if not disable_user_pass_login %}
	<button class="btn btn-sm btn-primary btn-block btn-login" type="submit">
		{{ _("LOGIN") }}</button>
	{% endif %}
	{% if ldap_settings and ldap_settings.enabled %}
	<button class="btn btn-sm btn-default btn-block btn-login btn-ldap-login">
		{{ _("Login with LDAP") }}</button>
	{% endif %}
</div>
{% endmacro %}

{% block head_include %}
{{ include_style('login.bundle.css') }}
<style>
* {
    box-sizing: border-box !important;
}

html {
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
    box-sizing: border-box !important;
}

body {
    background: linear-gradient(135deg, #c6d8ff 0%, #ffffff 25%, #8766ff 50%, #ffffff 100%) !important;
    background-size: 400% 400% !important;
    animation: gradientShift 15s ease infinite !important;
    height: 100vh !important;
    position: relative !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    max-width: 100% !important;
    width: 100% !important;
    box-sizing: border-box !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

@keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* Ensure no extra space */
html, body {
    margin: 0 !important;
    padding: 0 !important;
    height: 100% !important;
    overflow: hidden !important;
}

/* Remove any default container padding/margins */
.container, .container-fluid, .main-section, .page-container,
body > div, .web-page-wrapper, .page-wrapper, .main-wrapper,
.page-content-wrapper, .page-content, .main-content-wrapper,
#page-login, .page, .page-body {
    margin: 0 !important;
    padding: 0 !important;
    max-width: 100% !important;
    width: 100% !important;
}

/* Split screen layout container - Full Width Panel */
.split-screen-container {
    display: flex !important;
    width: 85% !important;
    max-width: 1500px !important;
    height: 80vh !important;
    max-height: 800px !important;
    margin: 0 auto !important;
    padding: 0 !important;
    overflow: hidden !important;
    position: relative !important;
    gap: 0 !important;
    flex-wrap: nowrap !important;
    border-radius: 10px !important;
    box-shadow: 
        0 20px 80px rgba(0, 0, 0, 0.4),
        0 10px 40px rgba(0, 0, 0, 0.3),
        0 5px 20px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(0, 0, 0, 0.1) !important;
    background: white !important;
}

/* Left side - Welcome Section with Carousel */
.left-carousel-section {
    flex: 0 0 70% !important;
    width: 70% !important;
    max-width: 70% !important;
    min-width: 70% !important;
    background: linear-gradient(135deg, #FF6B9D 0%, #C865DD 50%, #6E45E2 100%) !important;
    position: relative !important;
    overflow: hidden !important;
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    box-sizing: border-box !important;
    border-radius: 10px 0 0 10px !important;
}

/* Carousel Container */
.carousel-container {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    overflow: hidden !important;
}

.carousel-slide {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    opacity: 0 !important;
    transition: opacity 1.5s ease-in-out !important;
    background-size: cover !important;
    background-position: center !important;
    background-repeat: no-repeat !important;
}

.carousel-slide.active {
    opacity: 1 !important;
    z-index: 1 !important;
}

/* Gradient overlay on carousel images */
.carousel-slide::before {
    content: '' !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    background: linear-gradient(135deg, rgba(255, 107, 157, 0.7) 0%, rgba(200, 101, 221, 0.7) 50%, rgba(110, 69, 226, 0.7) 100%) !important;
    z-index: 1 !important;
}

/* Carousel navigation dots */
.carousel-dots {
    position: absolute !important;
    bottom: 30px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    display: flex !important;
    gap: 12px !important;
    z-index: 10 !important;
}

.carousel-dot {
    width: 10px !important;
    height: 10px !important;
    border-radius: 50% !important;
    background: rgba(255, 255, 255, 0.5) !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    border: none !important;
}

.carousel-dot.active {
    background: #ffffff !important;
    transform: scale(1.3) !important;
}

.carousel-dot:hover {
    background: rgba(255, 255, 255, 0.8) !important;
}

/* Welcome Content Styling */
.welcome-content {
    position: absolute !important;
    z-index: 10 !important;
    color: white !important;
    max-width: 600px !important;
    padding: 80px 100px !important;
    top: 50% !important;
    left: 0 !important;
    transform: translateY(-50%) !important;
}

.welcome-title {
    font-size: 52px !important;
    font-weight: 700 !important;
    color: white !important;
    margin-bottom: 28px !important;
    line-height: 1.2 !important;
}

.welcome-text {
    font-size: 20px !important;
    color: rgba(255, 255, 255, 0.95) !important;
    line-height: 1.6 !important;
    margin: 0 !important;
}

/* Floating Shapes Animation */
.floating-shape {
    position: absolute !important;
    background: linear-gradient(135deg, #FF9A76 0%, #FF6B9D 100%) !important;
    border-radius: 50px !important;
    opacity: 0.5 !important;
    animation: float-diagonal 20s infinite ease-in-out !important;
    z-index: 5 !important;
}

.shape-1 {
    width: 150px !important;
    height: 40px !important;
    bottom: 10% !important;
    left: 5% !important;
    animation-delay: 0s !important;
}

.shape-2 {
    width: 120px !important;
    height: 35px !important;
    bottom: 30% !important;
    left: 15% !important;
    animation-delay: 2s !important;
}

.shape-3 {
    width: 100px !important;
    height: 30px !important;
    top: 20% !important;
    left: 10% !important;
    animation-delay: 4s !important;
}

.shape-4 {
    width: 130px !important;
    height: 38px !important;
    top: 40% !important;
    right: 15% !important;
    animation-delay: 1s !important;
}

@keyframes float-diagonal {
    0%, 100% {
        transform: translate(0, 0) rotate(-15deg) !important;
    }
    50% {
        transform: translate(30px, -30px) rotate(-15deg) !important;
    }
}

/* Right side - Login Form */
.right-login-section {
    flex: 0 0 30% !important;
    width: 30% !important;
    max-width: 30% !important;
    min-width: 30% !important;
    background: #ffffff !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 50px 50px 40px 50px !important;
    overflow-y: auto !important;
    height: 100% !important;
    margin: 0 !important;
    border: none !important;
    box-sizing: border-box !important;
    border-radius: 0 30px 30px 0 !important;
}

@keyframes float {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    33% { transform: translateY(-20px) rotate(1deg); }
    66% { transform: translateY(10px) rotate(-1deg); }
}

/* Hide top navigation */
.navbar, .navbar-nav, .nav, .navbar-brand, .navbar-toggler,
.navbar-expand-lg, .navbar-light, .navbar-dark,
.container-fluid, .navbar-collapse, .nav-item, .nav-link,
.navbar-container, .navbar-wrapper, .main-header, .top-nav,
.navigation, .nav-bar, .header, .navbar-header {
    display: none !important;
}

/* Hide any header navigation */
header, .header, .main-header, .top-nav, .navigation,
.nav-bar, .navbar-container, .navbar-wrapper {
    display: none !important;
}

/* Ensure page takes full height without navigation */
.page-wrapper, .main-content, .content-wrapper {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

/* Main container wrapper */
.for-login {
    background: transparent !important;
    backdrop-filter: none !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
    max-width: 100% !important;
    width: 100% !important;
    position: relative !important;
    overflow: visible !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: center !important;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Glassmorphism effect */
.for-login::before {
    content: '' !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    height: 1px !important;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent) !important;
}

.page-card {
    background: transparent !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    padding: 0 !important;
    margin: 0 !important;
    max-width: none !important;
    border: none !important;
}

/* Login Form Title */
.page-card-head {
    background: transparent !important;
    text-align: center !important;
    margin-bottom: 35px !important;
    position: relative !important;
}

.login-form-title {
    font-size: 26px !important;
    font-weight: 600 !important;
    color: #7B68EE !important;
    letter-spacing: 2px !important;
    margin: 10px 0 0 0 !important;
    text-align: center !important;
}

.page-card-head h4 {
    font-size: 26px !important;
    font-weight: 600 !important;
    color: #7B68EE !important;
    letter-spacing: 2px !important;
    margin: 10px 0 0 0 !important;
    text-align: center !important;
    text-transform: uppercase !important;
}

/* App Logo Styling */
.app-logo-container {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    margin: 0 auto 20px auto !important;
    width: 100px !important;
    height: 100px !important;
    position: relative !important;
}

.app-logo {
    max-width: 100px !important;
    max-height: 100px !important;
    width: auto !important;
    height: auto !important;
    object-fit: contain !important;
    display: block !important;
    margin: 0 auto !important;
}

.page-card-body {
    background: transparent !important;
    padding: 0 !important;
}

.page-card-actions {
    background: transparent !important;
    padding: 0 !important;
    margin: 20px 0 0 0 !important;
}

.page-card-actions input[type="text"],
.page-card-actions input[type="email"],
.page-card-actions input[type="password"],
.page-card-actions input[type="number"],
.page-card-actions input[type="tel"],
.page-card-actions input[type="url"],
.page-card-actions input[type="search"],
.page-card-actions input[type="time"],
.page-card-actions input[type="date"],
.page-card-actions input[type="datetime-local"],
.page-card-actions input[type="month"],
.page-card-actions input[type="week"] {
    margin-bottom: 18px !important;
}

#twofactor_div .form-control {
    margin-bottom: 22px !important;
}

/* Modern Form Elements */
.form-control, .form-control:focus {
    background: #F5F5F5 !important;
    border: none !important;
    border-radius: 25px !important;
    padding: 18px 24px 18px 55px !important;
    font-size: 15px !important;
    font-weight: 400 !important;
    color: #333333 !important;
    transition: all 0.3s ease !important;
    width: 100% !important;
    box-shadow: none !important;
}

.form-control:focus {
    background: #EFEFEF !important;
    outline: none !important;
    box-shadow: none !important;
    transform: none !important;
}

.form-control::placeholder {
    color: #999999 !important;
    font-weight: 400 !important;
}

/* Form Group */
.form-group {
    margin-bottom: 0 !important;
}

/* Field Containers */
.email-field, .password-field {
    position: relative !important;
    margin-bottom: 20px !important;
}

.email-field .field-icon, .password-field .field-icon {
    position: absolute !important;
    left: 22px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    width: 20px !important;
    height: 20px !important;
    color: #999999 !important;
    transition: all 0.3s ease !important;
    z-index: 2 !important;
}

.email-field:focus-within .field-icon, .password-field:focus-within .field-icon {
    color: #7B68EE !important;
}

.toggle-password {
    position: absolute !important;
    right: 20px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    color: #999999 !important;
    font-size: 12px !important;
    font-weight: 400 !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    z-index: 2 !important;
    display: none !important;
}

.toggle-password:hover {
    color: #7B68EE !important;
    text-decoration: none !important;
}

/* Remove autofill yellow background */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active,
.form-control:-webkit-autofill,
.form-control:-webkit-autofill:hover,
.form-control:-webkit-autofill:focus,
.form-control:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 30px #F5F5F5 inset !important;
    -webkit-text-fill-color: #333333 !important;
    background-color: #F5F5F5 !important;
    padding: 18px 24px 18px 55px !important;
}

/* Gradient Login Button */
.btn-login, .btn-primary {
    background: linear-gradient(135deg, #FF6B9D 0%, #C865DD 50%, #7B68EE 100%) !important;
    border: none !important;
    color: #FFFFFF !important;
    border-radius: 25px !important;
    padding: 18px 40px !important;
    font-size: 17px !important;
    font-weight: 600 !important;
    text-transform: uppercase !important;
    letter-spacing: 1px !important;
    transition: all 0.3s ease !important;
    box-shadow: 0 8px 20px rgba(199, 101, 221, 0.3) !important;
    position: relative !important;
    overflow: hidden !important;
    width: 100% !important;
    margin: 0 !important;
}

.btn-login:hover, .btn-primary:hover {
    background: linear-gradient(135deg, #FF5A8C 0%, #B754CC 50%, #6A57D7 100%) !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 12px 25px rgba(199, 101, 221, 0.4) !important;
}

.btn-login:active, .btn-primary:active {
    transform: translateY(0) !important;
    box-shadow: 0 6px 15px rgba(199, 101, 221, 0.3) !important;
}

/* Remember and Forgot Password Row */
.remember-forgot-row {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    margin: 18px 0 !important;
    font-size: 14px !important;
}

.remember-checkbox {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    color: #666666 !important;
}

.remember-checkbox input[type="checkbox"] {
    width: 20px !important;
    height: 20px !important;
    cursor: pointer !important;
}

.forgot-password-message {
    text-align: right !important;
    margin: 0 !important;
}

.forgot-password-message a {
    color: #999999 !important;
    text-decoration: none !important;
    font-weight: 400 !important;
    font-size: 14px !important;
    transition: all 0.3s ease !important;
}

.forgot-password-message a:hover {
    color: #7B68EE !important;
}

/* Sign Up Message - Hidden for this design */
.sign-up-message {
    display: none !important;
}

/* Style all form sections consistently - Allow jQuery to toggle */
section.for-login, 
section.for-forgot, 
section.for-signup, 
section.for-login-with-email-link, 
section.for-email-login {
    width: 100%;
    background: transparent;
    padding: 0;
}

/* When sections are toggled visible by jQuery, use flex layout */
section.for-login[style*="display: block"],
section.for-forgot[style*="display: block"],
section.for-signup[style*="display: block"],
section.for-login-with-email-link[style*="display: block"],
section.for-email-login[style*="display: block"] {
    display: flex !important;
    flex-direction: column !important;
    justify-content: center !important;
}

/* When sections are toggled hidden by jQuery */
section.for-login[style*="display: none"],
section.for-forgot[style*="display: none"],
section.for-signup[style*="display: none"],
section.for-login-with-email-link[style*="display: none"],
section.for-email-login[style*="display: none"] {
    display: none !important;
}

/* Override the hide class for forms when their section is visible */
section.for-forgot .form-forgot.hide {
    display: block;
}

section.for-signup .form-signup.hide {
    display: block;
}

section.for-login-with-email-link .form-login-with-email-link.hide {
    display: block;
}

/* Hide powered-by section on forgot/signup pages */
.for-forgot .powered-by-section,
.for-signup .powered-by-section,
.for-email-login .powered-by-section,
.for-login-with-email-link .powered-by-section {
    display: none;
}

/* Back to Login link styling */
.back-to-login-link {
    margin-top: 24px;
    text-align: center;
}

.back-to-login-link a {
    color: #999999;
    text-decoration: none;
    font-size: 14px;
    transition: all 0.3s ease;
}

.back-to-login-link a:hover {
    color: #7B68EE;
}

/* Forgot Password specific styling */
.for-forgot .page-card-head h4,
.for-signup .page-card-head h4,
.for-email-login .page-card-head h4,
.for-login-with-email-link .page-card-head h4 {
    color: #7B68EE;
    font-size: 22px;
    letter-spacing: 2px;
}

.for-forgot .sign-up-message,
.for-signup .sign-up-message,
.for-email-login .sign-up-message,
.for-login-with-email-link .sign-up-message {
    display: block;
    text-align: center;
    margin-top: 20px;
    color: #666666;
}

.for-forgot .sign-up-message a,
.for-signup .sign-up-message a,
.for-email-login .sign-up-message a,
.for-login-with-email-link .sign-up-message a {
    color: #7B68EE;
    text-decoration: none;
}

.for-forgot .sign-up-message a:hover,
.for-signup .sign-up-message a:hover,
.for-email-login .sign-up-message a:hover,
.for-login-with-email-link .sign-up-message a:hover {
    color: #FF6B9D;
}

/* Loading Animation */
.btn-login:disabled, .btn-primary:disabled {
    opacity: 0.7 !important;
    cursor: not-allowed !important;
    transform: none !important;
}

/* Responsive Design */
@media (max-width: 968px) {
    body {
        padding: 0 !important;
        height: 100vh !important;
        overflow: hidden !important;
    }
    
    .split-screen-container {
        flex-direction: column !important;
        width: 100% !important;
        max-width: 100% !important;
        height: 100vh !important;
        max-height: 100vh !important;
        min-height: 100vh !important;
        border-radius: 0 !important;
        margin: 0 !important;
    }
    
    .left-carousel-section {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 100% !important;
        height: 40vh !important;
        border-radius: 0 !important;
    }
    
    .welcome-content {
        padding: 30px 20px !important;
        max-width: 100% !important;
    }
    
    .welcome-title {
        font-size: 28px !important;
    }
    
    .welcome-text {
        font-size: 14px !important;
    }
    
    .carousel-dots {
        bottom: 15px !important;
    }
    
    .right-login-section {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 100% !important;
        height: 60vh !important;
        padding: 30px 20px !important;
        border-radius: 0 !important;
    }
    
    .login-form-title,
    .page-card-head h4 {
        font-size: 18px !important;
    }
    
    .app-logo-container {
        width: 60px !important;
        height: 60px !important;
        margin-bottom: 15px !important;
    }
    
    .app-logo {
        max-width: 60px !important;
        max-height: 60px !important;
    }
    
    .app-logo-fallback {
        width: 60px !important;
        height: 60px !important;
    }
    
    .app-logo-fallback svg {
        width: 30px !important;
        height: 30px !important;
    }
    
    .form-control {
        padding: 14px 18px 14px 45px !important;
        font-size: 14px !important;
    }
    
    .floating-shape {
        display: none !important;
    }
    
    /* Forms on mobile */
    .for-forgot .right-login-section,
    .for-signup .right-login-section,
    .for-login-with-email-link .right-login-section,
    .for-email-login .right-login-section {
        padding: 30px 20px !important;
    }
}
</style>
{% endblock %}

{% macro logo_section(title=null) %}
<div class="page-card-head">
    {% set app_logo = frappe.get_doc("Website Settings").app_logo %}
    <div class="app-logo-container">
        {% if app_logo %}
        <img class="app-logo" 
             src="{{ app_logo }}" 
             alt="App Logo" 
             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
        <div class="app-logo-fallback" style="display: none;">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
            </svg>
        </div>
        {% else %}
        <div class="app-logo-fallback">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
            </svg>
        </div>
        {% endif %}
    </div>
    {% if title %}
        <h4>{{ _(title) }}</h4>
    {% else %}
        <h2 class="login-form-title">{{ _("LOGIN") }}</h2>
    {% endif %}
</div>
{% endmacro %}

{% block page_content %}
<!-- {{ for_test }} -->
<div class="split-screen-container">
	<!-- Left Side - Welcome Section with Carousel -->
	<div class="left-carousel-section">
		<!-- Image Carousel Background -->
		<div class="carousel-container" id="imageCarousel">
			{% set background_images = frappe.get_doc("Website Settings").background_images %}
			{% if background_images %}
				{% for img in background_images %}
				<div class="carousel-slide {% if loop.index == 1 %}active{% endif %}" 
					 style="background-image: url('{{ img.attachment }}');">
				</div>
				{% endfor %}
				
				<div class="carousel-dots">
					{% for img in background_images %}
					<div class="carousel-dot {% if loop.index == 1 %}active{% endif %}" 
						 data-slide="{{ loop.index - 1 }}"></div>
					{% endfor %}
				</div>
			{% else %}
				<!-- Fallback gradient if no images -->
				<div class="carousel-slide active" 
					 style="background: linear-gradient(135deg, #FF6B9D 0%, #C865DD 50%, #6E45E2 100%);">
				</div>
			{% endif %}
		</div>
		
		<!-- Floating Shapes -->
		<!-- <div class="floating-shape shape-1"></div>
		<div class="floating-shape shape-2"></div>
		<div class="floating-shape shape-3"></div>
		<div class="floating-shape shape-4"></div> -->
		
		<!-- Welcome Content Overlay -->
		<div class="welcome-content">
			{% set app_name = frappe.get_doc("Website Settings").app_name %}
			{% set welcome_message = frappe.get_doc("Website Settings").welcome_message %}
			<h1 class="welcome-title">{{ _("Welcome to {0}").format(app_name or _("Our Platform")) }}</h1>
			<p class="welcome-text">
                {{ welcome_message or '' }}
			</p>
		</div>
	</div>
	
	<!-- Right Side - Login Form -->
	<div class="right-login-section">
		<noscript>
			<div class="text-center my-5">
				<h4>{{ _("Javascript is disabled on your browser") }}</h4>
				<p class="text-muted">
					{{ _("You need to enable JavaScript for your app to work.") }}<br>{{ _("To enable it follow the instructions in the following link: {0}").format("<a href='https://enable-javascript.com/'>enable-javascript.com</a></p>") }}
			</div>
		</noscript>
		<section class='for-login'>
		{{ logo_section() }}
		<div class="login-content page-card">
			<form class="form-signin form-login" role="form">
				{%- if social_login or login_with_email_link -%}
				<div class="page-card-body">
					<form class="form-signin form-login" role="form">
						{{ email_login_body() }}
					</form>
					<div class="social-logins text-center">
						{% if not disable_user_pass_login or (ldap_settings and ldap_settings.enabled) %}
						<p class="text-muted login-divider">{{ _("or") }}</p>
						{% endif %}
						<div class="social-login-buttons">
							{% for provider in provider_logins %}
							<div class="login-button-wrapper">
								<a href="{{ provider.auth_url }}"
									class="btn btn-block btn-default btn-sm btn-login-option btn-{{ provider.name }}">
									{% if provider.icon %}
										{{ provider.icon }}
									{% endif %}
									{{ _("Login With {0}").format(provider.provider_name) }}</a>
							</div>
							{% endfor %}
						</div>
						{% if login_with_email_link %}
						<div class="login-with-email-link social-login-buttons">
							<div class="login-button-wrapper">
								<a href="#login-with-email-link"
									class="btn btn-block btn-default btn-sm btn-login-option btn-login-with-email-link">
									{{ _("Login with Email Link") }}</a>
							</div>
						</div>
						{% endif %}
					</div>
				</div>
				{% else %}
					{{ email_login_body() }}
				{%- endif -%}
			</form>
		</div>
		{%- if not disable_signup and not disable_user_pass_login -%}
		<div class="text-center sign-up-message">
			{{ _("Don't have an account?") }}
			<a href="#signup">{{ _("Sign up") }}</a>
		</div>
		{%- endif -%}
		
		<!-- Powered by Spak Systems (Only on Login page) -->
		<div class="powered-by-section" style="text-align: center; margin-top: 25px;">
			<p style="text-align: center; color: #666666; font-size: 12px; margin-bottom: 8px;">Powered by 
				<a href="https://spaksystems.com" style="color: #FF9028; text-decoration: none; font-weight: 600;">Spak Systems</a>
			</p>
			<div style="margin-top: 8px;">
				{% set poweredby_logo = frappe.get_doc("Website Settings").poweredby_logo %}
				{% if poweredby_logo %}
				<a href="https://spaksystems.com">
					<img src="{{ poweredby_logo }}" alt="Spak Systems" style="max-width: 100px; height: auto;">
				</a>
				{% endif %}
			</div>
		</div>
		
		</section>
		
		{%- if social_login -%}
		<section class='for-email-login'>
			{{ logo_section() }}
			<div class="login-content page-card">
				<form class="form-signin form-login" role="form">
					{{ email_login_body() }}
				</form>
			</div>
			{%- if not disable_signup and not disable_user_pass_login -%}
			<div class="text-center sign-up-message">
				{{ _("Don't have an account?") }}
				<a href="#signup">{{ _("Sign up") }}</a>
			</div>
			{%- endif -%}
		</section>
		{%- endif -%}

		<section class='for-signup {{ "signup-disabled" if disable_signup else "" }}'>
			{{ logo_section(_('Create a {0} Account').format(app_name or _("Frappe"))) }}
			<div class="login-content page-card">
				{%- if not disable_signup -%}
				{{ signup_form_template }}
				{%- else -%}
				<div class='page-card-head mb-2'>
					<span class='indicator gray'>{{_("Signup Disabled")}}</span>
					<p class="text-muted text-normal sign-up-message mt-1 mb-8">{{_("Signups have been disabled for this website.")}}</p>
					<div><a href='/' class='btn btn-primary btn-md'>{{ _("Home") }}</a></div>
				</div>
				{%- endif -%}
			</div>
		</section>

		<section class='for-forgot'>
			{{ logo_section('Forgot Password') }}
			<div class="login-content page-card">
				<form class="form-signin form-forgot hide" role="form">
					<div class="page-card-body">
						<div class="email-field">
							<input type="email" id="forgot_email" class="form-control"
								placeholder="{{ _('Email Address') }}" required autofocus autocomplete="username">
							<svg class="field-icon email-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
								xmlns="http://www.w3.org/2000/svg">
								<path
									d="M2.5 7.65149V15.0757C2.5 15.4374 2.64367 15.7842 2.8994 16.04C3.15513 16.2957 3.50198 16.4394 3.86364 16.4394H16.1364C16.498 16.4394 16.8449 16.2957 17.1006 16.04C17.3563 15.7842 17.5 15.4374 17.5 15.0757V7.65149"
									stroke="#74808B" stroke-miterlimit="10" stroke-linecap="square" />
								<path
									d="M17.5 7.57572V5.53026C17.5 5.1686 17.3563 4.82176 17.1006 4.56603C16.8449 4.31029 16.498 4.16663 16.1364 4.16663H3.86364C3.50198 4.16663 3.15513 4.31029 2.8994 4.56603C2.64367 4.82176 2.5 5.1686 2.5 5.53026V7.57572L10 10.8333L17.5 7.57572Z"
									stroke="#74808B" stroke-miterlimit="10" stroke-linecap="square" />
							</svg>
						</div>
					</div>
					<div class="page-card-actions">
						<button class="btn btn-sm btn-primary btn-block btn-forgot"
							type="submit">{{ _("Reset Password") }}</button>
						<p class="text-center back-to-login-link" style="margin-top: 20px; text-align: center;">
							<a href="#login" style="color: #999999; text-decoration: none; font-size: 13px; transition: all 0.3s ease;">{{ _("Back to Login") }}</a>
						</p>
					</div>
				</form>
			</div>
		</section>

		<section class='for-login-with-email-link'>
			{{ logo_section(_('Login with Email Link')) }}
			<div class="login-content page-card">
				<form class="form-signin form-login-with-email-link hide" role="form">
					<div class="page-card-body">
						<div class="email-field">
							<input type="email" id="login_with_email_link_email" class="form-control"
								placeholder="{{ _('Email Address') }}" required autofocus autocomplete="username">
							<svg class="field-icon email-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
								xmlns="http://www.w3.org/2000/svg">
								<path
									d="M2.5 7.65149V15.0757C2.5 15.4374 2.64367 15.7842 2.8994 16.04C3.15513 16.2957 3.50198 16.4394 3.86364 16.4394H16.1364C16.498 16.4394 16.8449 16.2957 17.1006 16.04C17.3563 15.7842 17.5 15.4374 17.5 15.0757V7.65149"
									stroke="#74808B" stroke-miterlimit="10" stroke-linecap="square" />
								<path
									d="M17.5 7.57572V5.53026C17.5 5.1686 17.3563 4.82176 17.1006 4.56603C16.8449 4.31029 16.498 4.16663 16.1364 4.16663H3.86364C3.50198 4.16663 3.15513 4.31029 2.8994 4.56603C2.64367 4.82176 2.5 5.1686 2.5 5.53026V7.57572L10 10.8333L17.5 7.57572Z"
									stroke="#74808B" stroke-miterlimit="10" stroke-linecap="square" />
							</svg>
						</div>
					</div>
				<div class="page-card-actions">
					<button class="btn btn-sm btn-primary btn-block btn-login-with-email-link"
						type="submit">{{ _("Send login link") }}</button>
					<p class="text-center back-to-login-link" style="margin-top: 20px; text-align: center;">
						<a href="#login" style="color: #999999; text-decoration: none; font-size: 13px; transition: all 0.3s ease;">{{ _("Back to Login") }}</a>
					</p>
				</div>
				</form>
			</div>
		</section>
	</div>
</div>

{% endblock %}

{% block script %}
<script>
    {% include "templates/includes/login/login.js" %}
    
    // Image Carousel Functionality
    document.addEventListener('DOMContentLoaded', function() {
        var slides = document.querySelectorAll('.carousel-slide');
        var dots = document.querySelectorAll('.carousel-dot');
        var currentSlide = 0;
        
        // Only run carousel if there are multiple slides
        if (slides.length > 1) {
            // Auto advance carousel
            function nextSlide() {
                slides[currentSlide].classList.remove('active');
                if (dots.length > 0) {
                    dots[currentSlide].classList.remove('active');
                }
                
                currentSlide = (currentSlide + 1) % slides.length;
                
                slides[currentSlide].classList.add('active');
                if (dots.length > 0) {
                    dots[currentSlide].classList.add('active');
                }
            }
            
            // Set interval for auto-advance (5 seconds)
            var autoAdvance = setInterval(nextSlide, 5000);
            
            // Click on dots to navigate
            dots.forEach(function(dot, index) {
                dot.addEventListener('click', function() {
                    clearInterval(autoAdvance);
                    
                    slides[currentSlide].classList.remove('active');
                    dots[currentSlide].classList.remove('active');
                    
                    currentSlide = index;
                    
                    slides[currentSlide].classList.add('active');
                    dots[currentSlide].classList.add('active');
                    
                    // Restart auto-advance after manual selection
                    autoAdvance = setInterval(nextSlide, 5000);
                });
            });
        }
        
    });
    
    // Ensure proper section visibility on page load
    $(document).on('login_rendered', function() {
        // Initial cleanup - hide all sections except the current route
        var hash = window.location.hash || '#login';
        
        if (hash === '#login' || hash === '') {
            $('.for-forgot').hide();
            $('.for-signup').hide();
            $('.for-login-with-email-link').hide();
            $('.for-email-login').hide();
            $('.for-login').show();
        } else if (hash === '#forgot') {
            $('.for-login').hide();
            $('.for-signup').hide();
            $('.for-login-with-email-link').hide();
            $('.for-email-login').hide();
            $('.for-forgot').show();
        } else if (hash === '#signup') {
            $('.for-login').hide();
            $('.for-forgot').hide();
            $('.for-login-with-email-link').hide();
            $('.for-email-login').hide();
            $('.for-signup').show();
        }
    });
</script>
{% endblock %}

{% block sidebar %}{% endblock %}